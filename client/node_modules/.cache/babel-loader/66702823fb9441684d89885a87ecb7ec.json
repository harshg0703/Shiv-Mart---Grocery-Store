{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hp\\\\Desktop\\\\Pull from github\\\\rabbitmart\\\\client\\\\src\\\\components\\\\privete-route\\\\PrivateRoute.js\",\n    _s = $RefreshSig$();\n\nimport { useDispatch } from \"react-redux\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useEffect, useState } from \"react\";\nimport { logout, verifyUser } from \"../../actions/auth\";\nimport Loading from \"../loading/Loading\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst PrivateRoute = _ref => {\n  _s();\n\n  let {\n    component,\n    role\n  } = _ref;\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  const [auth, setAuth] = useState(false);\n  useEffect(() => {\n    const onError = () => {\n      dispatch(logout);\n      navigate('/login');\n    };\n\n    const onSuccess = user => {\n      if (!role || role === user.role) return setAuth(true);\n      navigate('/401');\n    };\n\n    dispatch(verifyUser(onSuccess, onError));\n  }, [dispatch, navigate, role]);\n  if (auth) return component;\n  return /*#__PURE__*/_jsxDEV(Loading, {\n    text: 'Verifying'\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 30,\n    columnNumber: 12\n  }, this);\n};\n\n_s(PrivateRoute, \"Fg2AzKU+5i9ZBuo2WkOeuiY94Js=\", false, function () {\n  return [useDispatch, useNavigate];\n});\n\n_c = PrivateRoute;\nexport default PrivateRoute;\n\nvar _c;\n\n$RefreshReg$(_c, \"PrivateRoute\");","map":{"version":3,"names":["useDispatch","useNavigate","useEffect","useState","logout","verifyUser","Loading","PrivateRoute","component","role","dispatch","navigate","auth","setAuth","onError","onSuccess","user"],"sources":["C:/Users/hp/Desktop/Pull from github/rabbitmart/client/src/components/privete-route/PrivateRoute.js"],"sourcesContent":["import {useDispatch} from \"react-redux\";\r\nimport {useNavigate} from \"react-router-dom\";\r\nimport {useEffect, useState} from \"react\";\r\nimport {logout, verifyUser} from \"../../actions/auth\";\r\nimport Loading from \"../loading/Loading\";\r\n\r\nconst PrivateRoute = ({component, role}) => {\r\n    const dispatch = useDispatch();\r\n    const navigate = useNavigate();\r\n    const [auth, setAuth] = useState(false);\r\n\r\n    useEffect(() => {\r\n\r\n        const onError = () => {\r\n            dispatch(logout);\r\n            navigate('/login');\r\n        }\r\n\r\n        const onSuccess = (user) => {\r\n            if (!role || role === user.role)\r\n                return setAuth(true);\r\n            navigate('/401');\r\n        }\r\n\r\n        dispatch(verifyUser(onSuccess, onError));\r\n    }, [dispatch, navigate, role])\r\n\r\n    if (auth)\r\n        return component;\r\n    return <Loading text={'Verifying'}/>\r\n}\r\n\r\nexport default PrivateRoute;"],"mappings":";;;AAAA,SAAQA,WAAR,QAA0B,aAA1B;AACA,SAAQC,WAAR,QAA0B,kBAA1B;AACA,SAAQC,SAAR,EAAmBC,QAAnB,QAAkC,OAAlC;AACA,SAAQC,MAAR,EAAgBC,UAAhB,QAAiC,oBAAjC;AACA,OAAOC,OAAP,MAAoB,oBAApB;;;AAEA,MAAMC,YAAY,GAAG,QAAuB;EAAA;;EAAA,IAAtB;IAACC,SAAD;IAAYC;EAAZ,CAAsB;EACxC,MAAMC,QAAQ,GAAGV,WAAW,EAA5B;EACA,MAAMW,QAAQ,GAAGV,WAAW,EAA5B;EACA,MAAM,CAACW,IAAD,EAAOC,OAAP,IAAkBV,QAAQ,CAAC,KAAD,CAAhC;EAEAD,SAAS,CAAC,MAAM;IAEZ,MAAMY,OAAO,GAAG,MAAM;MAClBJ,QAAQ,CAACN,MAAD,CAAR;MACAO,QAAQ,CAAC,QAAD,CAAR;IACH,CAHD;;IAKA,MAAMI,SAAS,GAAIC,IAAD,IAAU;MACxB,IAAI,CAACP,IAAD,IAASA,IAAI,KAAKO,IAAI,CAACP,IAA3B,EACI,OAAOI,OAAO,CAAC,IAAD,CAAd;MACJF,QAAQ,CAAC,MAAD,CAAR;IACH,CAJD;;IAMAD,QAAQ,CAACL,UAAU,CAACU,SAAD,EAAYD,OAAZ,CAAX,CAAR;EACH,CAdQ,EAcN,CAACJ,QAAD,EAAWC,QAAX,EAAqBF,IAArB,CAdM,CAAT;EAgBA,IAAIG,IAAJ,EACI,OAAOJ,SAAP;EACJ,oBAAO,QAAC,OAAD;IAAS,IAAI,EAAE;EAAf;IAAA;IAAA;IAAA;EAAA,QAAP;AACH,CAxBD;;GAAMD,Y;UACeP,W,EACAC,W;;;KAFfM,Y;AA0BN,eAAeA,YAAf"},"metadata":{},"sourceType":"module"}