{"ast":null,"code":"import * as api from '../api';\nimport { FETCH_RECOMMENDATIONS, UPDATE_DATABASE, VALIDATE_CART, VALIDATE_CART_ERR } from \"../constants/actions/products\";\nexport const getProductsPerPage = (page, category, onSuccess) => async () => {\n  try {\n    const products = await api.getProductsPerPage(page, category).then(res => res.data);\n    onSuccess(products);\n  } catch (error) {\n    console.log(error);\n  }\n};\nexport const productsSearch = (search, page, onSuccess) => async () => {\n  try {\n    const products = await api.productsSearch(search, page).then(res => res.data);\n    onSuccess(products);\n  } catch (error) {\n    console.log(error);\n  }\n};\nexport const getRecommendations = onSuccess => async dispatch => {\n  try {\n    const data = await api.getRecommendations().then(res => res.data);\n    dispatch({\n      type: FETCH_RECOMMENDATIONS,\n      data\n    });\n    onSuccess(data);\n  } catch (e) {\n    console.log(e);\n  }\n};\nexport const postProduct = (product, onSuccess, onError) => async () => {\n  try {\n    const data = await api.postProduct(product).then(res => res.data);\n    onSuccess(data);\n  } catch (e) {\n    const {\n      data\n    } = e.response;\n    onError(data);\n  }\n};\nexport const validateCart = (cart, onSuccess, onError) => async dispatch => {\n  try {\n    var _cartData$token;\n\n    const cartData = await api.validateCart(cart).then(res => res.data);\n    dispatch({\n      type: VALIDATE_CART,\n      data: cartData\n    });\n    onSuccess((_cartData$token = cartData.token) === null || _cartData$token === void 0 ? void 0 : _cartData$token.split('.')[1]);\n  } catch (e) {\n    const {\n      data\n    } = e.response;\n    dispatch({\n      type: VALIDATE_CART_ERR,\n      data\n    });\n    onError(data);\n  }\n};\nexport const adminUpdateDatabase = (csv, mode, onSuccess, onError) => async dispatch => {\n  try {\n    const updatedData = await api.adminUpdateDatabase(csv, mode).then(res => res.data);\n    dispatch({\n      type: UPDATE_DATABASE,\n      data: updatedData\n    });\n    onSuccess(updatedData);\n  } catch (e) {\n    onError(e);\n  }\n};","map":{"version":3,"names":["api","FETCH_RECOMMENDATIONS","UPDATE_DATABASE","VALIDATE_CART","VALIDATE_CART_ERR","getProductsPerPage","page","category","onSuccess","products","then","res","data","error","console","log","productsSearch","search","getRecommendations","dispatch","type","e","postProduct","product","onError","response","validateCart","cart","cartData","token","split","adminUpdateDatabase","csv","mode","updatedData"],"sources":["C:/Users/hp/Desktop/Pull from github/rabbitmart/client/src/actions/products.js"],"sourcesContent":["import * as api from '../api';\r\nimport {FETCH_RECOMMENDATIONS, UPDATE_DATABASE, VALIDATE_CART, VALIDATE_CART_ERR} from \"../constants/actions/products\";\r\n\r\nexport const getProductsPerPage = (page, category, onSuccess) => async () => {\r\n    try {\r\n        const products = await api.getProductsPerPage(page, category).then(res => res.data);\r\n        onSuccess(products);\r\n    } catch (error) {\r\n        console.log(error);\r\n    } \r\n}\r\n\r\nexport const productsSearch = (search, page, onSuccess) => async () => {\r\n    try {\r\n        const products = await api.productsSearch(search, page).then(res => res.data);\r\n        onSuccess(products);\r\n    } catch (error) {\r\n        console.log(error);\r\n    }\r\n}\r\n\r\nexport const getRecommendations = (onSuccess) => async (dispatch) => {\r\n    try {\r\n        const data = await api.getRecommendations().then(res => res.data);\r\n        dispatch({type: FETCH_RECOMMENDATIONS, data})\r\n        onSuccess(data);\r\n    } catch (e) {\r\n        console.log(e)\r\n    }\r\n}\r\n\r\nexport const postProduct = (product, onSuccess, onError) => async () => {\r\n    try {\r\n        const data = await api.postProduct(product).then(res => res.data);\r\n        onSuccess(data);\r\n    } catch (e) {\r\n        const {data} = e.response;\r\n        onError(data);\r\n    }\r\n}\r\n\r\nexport const validateCart = (cart, onSuccess, onError) => async (dispatch) => {\r\n    try {\r\n        const cartData = await api.validateCart(cart).then(res => res.data);\r\n        dispatch({type: VALIDATE_CART, data: cartData});\r\n        onSuccess(cartData.token?.split('.')[1]);\r\n    } catch (e) {\r\n        const {data} = e.response;\r\n        dispatch({type: VALIDATE_CART_ERR, data});\r\n        onError(data);\r\n    }\r\n}\r\n\r\nexport const adminUpdateDatabase = (csv, mode, onSuccess, onError) => async (dispatch) => {\r\n    try {\r\n        const updatedData = await api.adminUpdateDatabase(csv, mode).then(res => res.data);\r\n        dispatch({type: UPDATE_DATABASE, data: updatedData});\r\n        onSuccess(updatedData);\r\n    } catch (e) {\r\n        onError(e);\r\n    }\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}